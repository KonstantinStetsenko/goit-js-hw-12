{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport { search } from '../main';\nimport { _page, _per_page } from '../main';\nimport { refs } from '../main';\n\nconst API_KEY = '35615577-2bf6ed1d70f9a1c328f0e4a49';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport let searchTerm = search;\nexport let arrData = [];\n\nexport async function fetchGallery(search) {\n  arrData = []; // Очистка перед новым запросом\n  try {\n    const response = await axios({\n      url: BASE_URL,\n      params: {\n        key: API_KEY,\n        q: search,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: _per_page,\n        page: _page,\n      },\n    });\n\n    arrData = response.data.hits;\n    console.log(arrData.length);\n  } catch (error) {\n    console.error('Error fetching data:', error);\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { arrData } from './pixabay-api';\n// import { userConteinerUL } from '../main';\nimport { refs } from '../main';\n// const gallery = document.querySelector('.gallery');\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function renderGallery(arrData) {\n  if (arrData.length === 0) {\n    console.log('Нет данных для отображения');\n    return;\n  }\n\n  const markup = arrData\n    .map(data2 => {\n      return `<li class=\"list-photo\">\n                <div class=\"gallery\">\n                  <a href=\"${data2.largeImageURL}\" class=\"gallery-item\">\n                    <img src=\"${data2.webformatURL}\" alt=\"${data2.tags}\" loading=\"lazy\" />\n                  </a>\n                </div>\n                <div class=\"container-total\">\n                  <div class=\"item\">\n                    <h2 class=\"head-photo\">likes</h2>\n                    <p class=\"total-photo\">${data2.likes}</p>\n                  </div>\n                  <div class=\"item\">\n                    <h2 class=\"head-photo\">views</h2>\n                    <p class=\"total-photo\">${data2.views}</p>\n                  </div>\n                  <div class=\"item\">\n                    <h2 class=\"head-photo\">comments</h2>\n                    <p class=\"total-photo\">${data2.comments}</p>\n                  </div>\n                  <div class=\"item\">\n                    <h2 class=\"head-photo\">downloads</h2>\n                    <p class=\"total-photo\">${data2.downloads}</p>\n                  </div>\n                </div>\n              </li>`;\n    })\n    .join('');\n\n  refs.userContainerUL.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { arrData, fetchGallery } from './js/pixabay-api';\nimport { renderGallery } from './js/render-functions';\n\nexport let search = '';\nexport let _page = 1;\nexport let _per_page = 15;\n\nexport const refs = {\n  userContainerUL: document.querySelector('.users-list'),\n  loader: document.querySelector('.loader'),\n  form: document.querySelector('.form-serch'), // форма поиска\n  btn: document.querySelector('.loadButton'), // кнопка загрузки\n  gallery: document.querySelector('.gallery'),\n  input: document.querySelector('.input-serch'), // поле ввода поиска\n};\n\nconsole.log(refs.input); // Исправляем ошибку здесь, должно быть `input`, а не `searchInput`\nconsole.log(refs.form); // Проверяем, что форма найдена\n\n// показать или скрыть лоадер\nfunction showLoader() {\n  refs.loader.classList.add('loader');\n}\nfunction hideLoader() {\n  refs.loader.classList.remove('loader');\n}\n\n// Показать или скрыть кнопку\nfunction showBtn() {\n  refs.btn.classList.remove('buttonHiden');\n}\nfunction hideBtn() {\n  refs.btn.classList.add('buttonHiden');\n}\n\n// скрываем лоадер при загрузке страницы\ndocument.addEventListener('DOMContentLoaded', () => {\n  hideLoader();\n});\n// функция для очистки предыдущего запроса\nfunction clearPreviousSearch() {\n  // search = ''; // сбрасываем значение переменной search\n  _page = 1; // сбрасываем номер страницы\n  if (refs.userContainerUL) {\n    refs.userContainerUL.innerHTML = ''; // очищаем контейнер с результатами\n  }\n  refs.input.value = ''; // очищаем поле ввода\n}\n// очистка страницы\n// function clearPage() {\n//   if (refs.userContainerUL) {\n//     refs.userContainerUL.innerHTML = '';\n//   }\n// }\n\n// обработка отправки формы\nasync function handleFormSubmit(event) {\n  event.preventDefault(); // предотвращаем перезагрузку страницы\n\n  search = refs.input.value; // получаем значение из поля поиска\n\n  console.log(search);\n\n  if (!search) {\n    hideLoader();\n    iziToast.warning({\n      message: 'Запрос пустой',\n      backgroundColor: '#ffa500',\n      messageSize: 16,\n      messageColor: '#FFF',\n      iconColor: '',\n      titleColor: '#fa0598e5',\n      icon: 'info-outline',\n      titleSize: 16,\n      messageLineHeight: 24,\n      position: 'topRight',\n    });\n\n    hideBtn();\n    console.log('Запрос пустой');\n    return;\n  }\n\n  showLoader(); // показываем лоадер\n\n  try {\n    await fetchGallery(search); // выполняем запрос по ключевому слову\n\n    if (arrData.length === 0) {\n      hideBtn;\n      iziToast.show({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        backgroundColor: '#ffa500',\n        messageSize: 16,\n        messageColor: '#FFF',\n        iconColor: '',\n        titleColor: '#ffa500',\n        icon: 'info-outline',\n        titleSize: 16,\n        messageLineHeight: 24,\n        position: 'topRight',\n      });\n    } else {\n      renderGallery(arrData); // отрисовываем результаты\n      if (arrData.length > 14) {\n        showBtn();\n      }\n    }\n    hideLoader(); // скрываем лоадер\n  } catch (error) {\n    console.error('Ошибка при получении данных:', error);\n    hideLoader();\n  }\n\n  refs.input.value = ''; // очищаем поле ввода\n}\n\n// добавляем обработчик события на отправку формы\nrefs.form.addEventListener('submit', handleFormSubmit);\n\n// обработка кнопки загрузки следующей страницы\nrefs.btn.addEventListener('click', async () => {\n  try {\n    _page += 1; // увеличиваем номер страницы при клике\n\n    await fetchGallery(search, _page); // загружаем следующую страницу\n    renderGallery(arrData); // отрисовываем данные\n  } catch (error) {\n    console.log('Ошибка при загрузке следующей страницы:', error);\n  }\n});\n"],"names":["API_KEY","BASE_URL","arrData","fetchGallery","search","axios","_per_page","_page","error","lightbox","SimpleLightbox","renderGallery","markup","data2","refs","showLoader","hideLoader","showBtn","hideBtn","handleFormSubmit","event","iziToast"],"mappings":"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"}