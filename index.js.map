{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport { search } from '../main';\nimport { _page } from '../main';\nimport { refs } from '../main';\nexport let searchTerm = search;\nexport let arrData = [];\nexport let totalImage = 1;\nexport let totalPages = 0;\nexport let _per_page = 15;\nconst API_KEY = '35615577-2bf6ed1d70f9a1c328f0e4a49';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchGallery(search) {\n  arrData = []; // Очистка перед новым запросом\n  try {\n    const response = await axios({\n      url: BASE_URL,\n      params: {\n        key: API_KEY,\n        q: search,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: _per_page,\n        page: _page,\n      },\n    });\n\n    arrData = response.data.hits;\n    totalImage = response.data.totalHits;\n    totalPages = totalImage / _per_page;\n    console.log(totalImage);\n    console.log(arrData.length);\n    console.log(response);\n  } catch (error) {\n    console.error('Error fetching data:', error);\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { arrData } from './pixabay-api';\n// import { userConteinerUL } from '../main';\nimport { refs } from '../main';\n// const gallery = document.querySelector('.gallery');\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function renderGallery(arrData) {\n  if (arrData.length === 0) {\n    console.log('Нет данных для отображения');\n    return;\n  }\n\n  const markup = arrData\n    .map(data2 => {\n      return `<li class=\"list-photo\">\n                <div class=\"gallery\">\n                  <a href=\"${data2.largeImageURL}\" class=\"gallery-item\">\n                    <img src=\"${data2.webformatURL}\" alt=\"${data2.tags}\" loading=\"lazy\" />\n                  </a>\n                </div>\n                <div class=\"container-total\">\n                  <div class=\"item\">\n                    <h2 class=\"head-photo\">likes</h2>\n                    <p class=\"total-photo\">${data2.likes}</p>\n                  </div>\n                  <div class=\"item\">\n                    <h2 class=\"head-photo\">views</h2>\n                    <p class=\"total-photo\">${data2.views}</p>\n                  </div>\n                  <div class=\"item\">\n                    <h2 class=\"head-photo\">comments</h2>\n                    <p class=\"total-photo\">${data2.comments}</p>\n                  </div>\n                  <div class=\"item\">\n                    <h2 class=\"head-photo\">downloads</h2>\n                    <p class=\"total-photo\">${data2.downloads}</p>\n                  </div>\n                </div>\n              </li>`;\n    })\n    .join('');\n\n  refs.userContainerUL.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { arrData, fetchGallery, totalImage } from './js/pixabay-api';\nimport { renderGallery } from './js/render-functions';\nimport { totalPages } from './js/pixabay-api';\nimport { _per_page } from './js/pixabay-api';\nexport let search = 'cat';\nexport let _page = 1;\nexport const refs = {\n  userContainerUL: document.querySelector('.users-list'),\n  loader: document.querySelector('.loader'),\n  form: document.querySelector('.form-serch'), // форма поиска\n  btn: document.querySelector('.loadButton'), // кнопка загрузки\n  gallery: document.querySelector('.gallery'),\n  input: document.querySelector('.input-serch'), // поле ввода поиска\n};\n\nconsole.log(refs.input); // Исправляем ошибку здесь, должно быть `input`, а не `searchInput`\nconsole.log(refs.form); // Проверяем, что форма найдена\n\n// показать или скрыть лоадер\nfunction showLoader() {\n  refs.loader.classList.add('loader');\n}\nfunction hideLoader() {\n  refs.loader.classList.remove('loader');\n}\n\n// Показать или скрыть кнопку\nfunction showBtn() {\n  refs.btn.classList.remove('buttonHiden');\n}\nfunction hideBtn() {\n  refs.btn.classList.add('buttonHiden');\n}\n\n// скрываем лоадер при загрузке страницы\ndocument.addEventListener('DOMContentLoaded', () => {\n  hideLoader();\n});\n// функция для очистки предыдущего запроса\nfunction clearPreviousSearch() {\n  // search = ''; // сбрасываем значение переменной search\n  _page = 1; // сбрасываем номер страницы\n  if (refs.userContainerUL) {\n    refs.userContainerUL.innerHTML = ''; // очищаем контейнер с результатами\n  }\n  refs.input.value = ''; // очищаем поле ввода\n}\n// очистка страницы\nfunction clearPage() {\n  if (refs.userContainerUL) {\n    refs.userContainerUL.innerHTML = '';\n  }\n}\n\n// обработка отправки формы\nasync function handleFormSubmit(event) {\n  event.preventDefault(); // предотвращаем перезагрузку страницы\n  clearPage();\n  search = refs.input.value; // получаем значение из поля поиска\n\n  console.log(search);\n\n  if (!search) {\n    hideLoader();\n    iziToast.warning({\n      message: 'Запрос пустой',\n      backgroundColor: '#ffa500',\n      messageSize: 16,\n      messageColor: '#FFF',\n      iconColor: '',\n      titleColor: '#fa0598e5',\n      icon: 'info-outline',\n      titleSize: 16,\n      messageLineHeight: 24,\n      position: 'topRight',\n    });\n\n    // hideBtn();\n    console.log('Запрос пустой');\n    return;\n  }\n\n  showLoader(); // показываем лоадер\n\n  try {\n    await fetchGallery(search); // выполняем запрос по ключевому слову\n\n    if (arrData.length === 0) {\n      hideBtn();\n      iziToast.show({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        backgroundColor: '#ffa500',\n        messageSize: 16,\n        messageColor: '#FFF',\n        iconColor: '',\n        titleColor: '#ffa500',\n        icon: 'info-outline',\n        titleSize: 16,\n        messageLineHeight: 24,\n        position: 'topRight',\n      });\n    } else {\n      renderGallery(arrData); // отрисовываем результаты\n\n      if (arrData.length >= 15) {\n        showBtn();\n      }\n    }\n\n    hideLoader(); // скрываем лоадер\n  } catch (error) {\n    console.error('Ошибка при получении данных:', error);\n    hideLoader();\n  }\n\n  refs.input.value = ''; // очищаем поле ввода\n}\n\n// добавляем обработчик события на отправку формы\nrefs.form.addEventListener('submit', handleFormSubmit);\n\n// обработка кнопки загрузки следующей страницы\nrefs.btn.addEventListener('click', async () => {\n  try {\n    _page += 1; // увеличиваем номер страницы при клике\n    if (_page > totalPages) {\n      hideBtn();\n      iziToast.warning({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        backgroundColor: '#ffa500',\n        messageSize: 16,\n        messageColor: '#FFF',\n        iconColor: '',\n        titleColor: '#fa0598e5',\n        icon: 'info-outline',\n        titleSize: 16,\n        messageLineHeight: 24,\n        position: 'topRight',\n      });\n      console.log('Скрываем кнопку');\n    } else {\n      showBtn();\n      console.log('показываем кнопку');\n    }\n    await fetchGallery(search, _page); // загружаем следующую страницу\n    renderGallery(arrData); // отрисовываем данные\n    smoothScroll();\n    console.log(_page);\n  } catch (error) {\n    console.log('Ошибка при загрузке следующей страницы:', error);\n  }\n});\n// скрол страницы\nfunction smoothScroll() {\n  const lastArticle = refs.userContainerUL.lastElementChild;\n  console.log(lastArticle);\n  const ArticleHeight = lastArticle.getBoundingClientRect().height;\n  console.log(ArticleHeight);\n  const scrolHeight = ArticleHeight * 5;\n  console.log(scrolHeight);\n  window.scrollBy({\n    top: scrolHeight,\n    left: 0,\n    behavior: 'smooth',\n  });\n}\n\n// Конец страниц\n"],"names":["arrData","totalImage","totalPages","_per_page","API_KEY","BASE_URL","fetchGallery","search","response","axios","_page","error","lightbox","SimpleLightbox","renderGallery","markup","data2","refs","showLoader","hideLoader","showBtn","hideBtn","clearPage","handleFormSubmit","event","iziToast","smoothScroll","lastArticle","ArticleHeight","scrolHeight"],"mappings":"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"}